<div class="calendar-container">

  <div class="display">

    <div class="calendar-left-content">

      <div class="month-header-control">
        <button (click)="prevMonth()">â—€</button>
        <h3>{{ currentMonth | date: 'yyyyå¹´ MMæœˆ' }}</h3>
        <button (click)="nextMonth()">â–¶</button>
      </div>

      <div class="calendar-wrapper">
        <table class="calendar-table">
          <thead>
            <tr>
              @for (dayName of dayNames; track $index) {
              <th>{{ dayName }}</th>
              }
            </tr>
          </thead>
          <tbody>
            @for (week of monthWeeks; track $index) {
            <tr class="calendar-week">
              @for (day of week; track $index) {
              <td class="calendar-day"
                [class.is-current-month]="day && (day | date:'MM') === (currentMonth | date:'MM')"
                [class.selected-day]="selectedDay && day && (day | date:'yyyy-MM-dd') === (selectedDay | date:'yyyy-MM-dd')"
                [class.is-today]="day && (day | date:'yyyy-MM-dd') === (today | date:'yyyy-MM-dd')"
                (click)="selectDay(day)">
                @if (day) {
                <span class="day-number">{{ day | date:'d' }}</span>
                <div class="activity-bar-container">
                  @for (act of getDayActivities(day); track act.calendarId) {
                  <div class="activity-bar" [class.multi-day]="isMultiDay(act)"
                    [title]="act.calendarTitle + ' (' + act.calendarStatus + ')'"
                    [ngClass]="{'activity-published': act.calendarStatus === 'published', 'activity-draft': act.calendarStatus === 'draft'}">
                    @if (isActivityStartDay(act, day) || !isMultiDay(act)) {
                    <span class="activity-title">{{ act.calendarTitle }}</span>
                    }
                  </div>
                  }
                </div>
                }
              </td>
              }
            </tr>
            }
          </tbody>
        </table>
      </div>

      <button (click)="openDialog()" class="add-btn">æ–°å¢žæ´»å‹•</button>
    </div>

    <div>
      <div class="sidebar-card">
        <h3>{{ selectedDay | date:'MM/dd' }} çš„æ´»å‹•</h3>
        <div class="sidebar-line"></div>

        <div class="activities-content">

          @if (selectedDayActivities.length > 0) {
          <ul>
            @for (activity of selectedDayActivities; track activity.calendarId) {
            <li
              [ngClass]="{ 'detail-published': activity.calendarStatus === 'published', 'detail-draft': activity.calendarStatus === 'draft' }"
              class="activity-item" (click)="openActivity(activity)">

              <img [src]="activity.calendarPhoto" alt="{{ activity.calendarTitle }}" class="activity-image">

              <strong>{{ activity.calendarTitle }}</strong>
              <span>{{ activity.calendarDescription }}</span>
              <small>
                {{ activity.calendarStartDate | date:'MM/dd' }}-{{ activity.calendarEndDate | date:'MM/dd' }}
              </small>
            </li>
            }
          </ul>
          } @else {
          <p class="no-activity">æœ¬æ—¥æ²’æœ‰æ´»å‹•ã€‚</p>
          }
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <button mat-raised-button color="primary" (click)="openBoardDialog()">
  ðŸ“¢ æŸ¥çœ‹æœ€æ–°å…¬å‘Š (ä¸²æŽ¥ API)
</button> -->
