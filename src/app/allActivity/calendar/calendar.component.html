<div class="calendarContainer">

  <div class="display">

    <div class="calendarLeftContent">

      <div class="monthHeaderControl">
        <button (click)="prevMonth()">â—€</button>
        <h3>{{ currentMonth | date: 'yyyyå¹´ MMæœˆ' }}</h3>
        <button (click)="nextMonth()">â–¶</button>
      </div>

      <div class="calendarWrapper">
        <table class="calendarTable">
          <thead>
            <tr>
              @for (dayName of dayNames; track $index) {
              <th>{{ dayName }}</th>
              }
            </tr>
          </thead>
          <tbody>
            @for (week of monthWeeks; track $index) {
            <tr class="calendarWeek">
              @for (day of week; track $index) {
              <td class="calendarDay"
                [class.isCurrentMonth]="day && (day | date:'MM') === (currentMonth | date:'MM')"
                [class.selectedDay]="selectedDay && day && (day | date:'yyyy-MM-dd') === (selectedDay | date:'yyyy-MM-dd')"
                [class.isToday]="day && (day | date:'yyyy-MM-dd') === (today | date:'yyyy-MM-dd')"
                (click)="selectDay(day)">
                @if (day) {
                <span class="dayNumber">{{ day | date:'d' }}</span>
                <div class="activityBarContainer">
                  @for (act of getDayActivities(day); track act.calendarId) {
                  <div class="activityBar" [class.multiDay]="isMultiDay(act)"
                    [title]="act.calendarTitle + ' (' + act.calendarStatus + ')'"
                    [ngClass]="{'activityPublished': act.calendarStatus === 'published', 'activityDraft': act.calendarStatus === 'draft'}">
                    @if (isActivityStartDay(act, day) || !isMultiDay(act)) {
                    <span class="activityTitle">{{ act.calendarTitle }}</span>
                    }
                  </div>
                  }
                </div>
                }
              </td>
              }
            </tr>
            }
          </tbody>
        </table>
      </div>

      <button (click)="openDialog()" class="addBtn">æ–°å¢žæ´»å‹•</button>
    </div>

    <div>
      <div class="sidebarCard">
        <h3>{{ selectedDay | date:'MM/dd' }} çš„æ´»å‹•</h3>
        <div class="sidebarLine"></div>

        <div class="activitiesContent">

          @if (selectedDayActivities.length > 0) {
          <ul>
            @for (activity of selectedDayActivities; track activity.calendarId) {
            <li
              [ngClass]="{ 'detailPublished': activity.calendarStatus === 'published', 'detailDraft': activity.calendarStatus === 'draft' }"
              class="activityItem" (click)="openActivity(activity)">

              <img [src]="activity.calendarPhoto" alt="{{ activity.calendarTitle }}" class="activityImage">

              <strong>{{ activity.calendarTitle }}</strong>
              <span>{{ activity.calendarDescription }}</span>
              <small>
                {{ activity.calendarStartDate | date:'MM/dd' }}-{{ activity.calendarEndDate | date:'MM/dd' }}
              </small>
            </li>
            }
          </ul>
          } @else {
          <p class="noActivity">æœ¬æ—¥æ²’æœ‰æ´»å‹•ã€‚</p>
          }
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <button mat-raised-button color="primary" (click)="openBoardDialog()">
  ðŸ“¢ æŸ¥çœ‹æœ€æ–°å…¬å‘Š (ä¸²æŽ¥ API)
</button> -->
