<div class="background">
  <h2 mat-dialog-title class="diaTitle">編輯活動：{{ data.calendarTitle }}</h2>

  <mat-dialog-content class="dialogContent">

    <div class="formRow">
      <div class="formField fullWidth">
        <label>活動標題</label>
        <input type="text" class="styledInput" [(ngModel)]="data.calendarTitle" placeholder="請輸入標題">
      </div>
    </div>

    <div class="formRow">
      <div class="formField fullWidth">
        <label>活動圖片</label>
        <div class="imagePreviewContainer">
          @if (newPhotoUrl) {
            <img [src]="newPhotoUrl" alt="{{ data.calendarTitle }} 活動照片" class="previewImg">
          } @else {
            <div class="noImagePlaceholder">
              <p>此活動沒有可顯示的圖片</p>
            </div>
          }
        </div>
        <input type="file" (change)="onFileSelected($event)" accept="image/*" class="fileInput">
      </div>
    </div>

    <div class="formRow">
      <div class="formField">
        <label>開始日期</label>
        <input type="date" class="styledInput" [(ngModel)]="data.calendarStartDate">
      </div>

      <div class="formField">
        <label>結束日期</label>
        <input type="date" class="styledInput" [(ngModel)]="data.calendarEndDate">
      </div>
    </div>

    <div class="formRow">
      <div class="formField fullWidth">
        <small class="infoText">
          原本時間：{{ data.calendarStartDate | date:'yyyy/MM/dd' }} ~ {{ data.calendarEndDate | date:'yyyy/MM/dd' }}
        </small>
      </div>
    </div>

    <div class="formRow">
      <div class="formField fullWidth">
        <label>活動內容</label>
        <textarea class="styledInput" [(ngModel)]="data.calendarDescription" rows="5" placeholder="請輸入活動內容..."></textarea>
      </div>
    </div>

  </mat-dialog-content>

  <mat-dialog-actions class="dialogActions spaceBetween">
    <button (click)="onDeleteClick()" class="dialogBtn deleteBtn">刪除</button>

    <div class="rightActions">
      <button (click)="onCancelClick()" class="dialogBtn cancelBtn">取消</button>

      <button [disabled]="form.invalid" (click)="onSaveDraftClick()" class="dialogBtn draftBtn">
        暫存
      </button>

      <button [disabled]="form.invalid" (click)="onPublishClick()" class="dialogBtn confirmBtn">
        發布
      </button>
    </div>
  </mat-dialog-actions>
</div>
