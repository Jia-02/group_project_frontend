<div style="height: auto; padding-left: 5%; padding-right: 5%;">
  <div style="display: flex; align-items: center;">
    <h1>餐點狀態</h1>
    <span style="flex: 1 1 auto"></span>
    <h3 style="margin-right: 30px;">待送餐點</h3>
    <div class="divCss1">
      <span>{{count}}</span>
    </div>
  </div>
  <div style="width: 100%; height: auto; display: flex;">
    <div
      style="height: auto; width:300px; border: 1px solid black; background-color: rgba(128,128,128,0.5); border-radius: 10px; padding: 10px; margin-bottom: 100px;">
      <h3>準備中</h3>
      @for(order of orders;track order){
      @if(order.status.includes("製作中")){
      <div style="background-color: white; border:1px solid black; border-radius: 5px;">
        <div style="display: flex; padding: 10px; align-items: start;">
          <div class="divCss1">
            <span>{{order.orderCode}}</span>
          </div>
          <span style="flex: 1 1 auto;"></span>
          @if(order.tableId){
          <div class="divCss1">
            <span>{{order.tableId}}</span>
          </div>
          }@else if(order.orderCode.includes("T")){
          <div class="divCss1">
            <span>外帶</span>
          </div>
          }@else {
          <div class="divCss1">
            <span>外送</span>
          </div>
          }
        </div>
        <div style="display: flex; padding: 10px; align-items: start;">
          @if(order.paid){
          <div class="divCss1">
            <span>已付款</span>
          </div>
          }@else {
          <div class="divCss1">
            <span>尚未付款</span>
          </div>
          }
        </div>

        @for(product of order.orderProductList;track product){
        <div>
          <ul>
            @if(product.settingId > 0 && product.status.includes("製作中")){
            <li>{{product.settingId}}號餐</li>
            <ul>
              @for(detail of product.orderDetails;track detail){
              @if(detail.mealStatus == "製作中"){
              <li>{{detail.productName}}&#40;
                @for(option of detail.detailList;track option){
                {{option.option}}
                @if(option.id != detail.detailList.length){
                <span>，</span>
                }
                }
                &#41; <br>
              </li>
              }
              }
            </ul>
            }@else {
            @for(detail of product.orderDetails;track detail){
            @if(detail.mealStatus == "製作中"){
            <li>{{detail.productName}}&#40;
              @for(option of detail.detailList;track option){
              {{option.option}}
              @if(option.id != detail.detailList.length){
              <span>，</span>
              }
              }
              &#41; <br>
            </li>
            }
            }
            }
          </ul>
        </div> <br>
        }
      </div> <br>
      }
      }
    </div>
    <span style="flex: 1 1 auto;"></span>
    <div
      style="height: auto; width:300px; border: 1px solid black; background-color: yellow; border-radius: 10px; padding: 10px; margin-bottom: 100px;">
      <h3>待送餐</h3>
      @for(order of orders;track order){
      @if(order.status.includes("待送餐")){
      <div style="background-color: white; border:1px solid black; border-radius: 5px;">
        <div style="display: flex; padding: 10px; align-items: start;">
          <div class="divCss1">
            <span>{{order.orderCode}}</span>
          </div>
          <span style="flex: 1 1 auto;"></span>
          @if(order.tableId){
          <div class="divCss1">
            <span>{{order.tableId}}</span>
          </div>
          }@else if(order.orderCode.includes("T")){
          <div class="divCss1">
            <span>外帶</span>
          </div>
          }@else {
          <div class="divCss1">
            <span>外送</span>
          </div>
          }
        </div>
        @for(product of order.orderProductList;track product){
        @if(order.orderCode.includes("A")){
        <div style="padding-left: 5%;">
          @if(product.settingId > 0 && product.status.includes("待送餐")){
          {{product.settingId}}號餐 <br>
          @for(detail of product.orderDetails;track detail){
          @if(detail.mealStatus == "待送餐"){
          <button (click)="delivery(order.orderId,true,product.orderDetailsId,detail.productId)">已送餐</button>
          {{detail.productName}}&#40;
          @for(option of detail.detailList;track option){
          {{option.option}}
          @if(detail.detailList.length != option.id){
          <span>，</span>
          }
          }
          <span>&#41;</span> <br>
          }
          }
          }@else {
          @for(detail of product.orderDetails;track detail){
          @if(detail.mealStatus == "待送餐"){
          <button (click)="delivery(order.orderId,true,product.orderDetailsId,detail.productId)">已送餐</button>
          {{detail.productName}}&#40;
          @for(option of detail.detailList;track option){
          {{option.option}}
          @if(detail.detailList.length != option.id){
          <span>，</span>
          }
          }
          <span>&#41;</span> <br>
          }
          }
          }
        </div> <br>
        }
        @else {
        <div style="padding-left: 5%;">
          @if(product.settingId > 0 && product.status.includes("待送餐")){
          {{product.settingId}}號餐 <br>
          @for(detail of product.orderDetails;track detail){
          @if(detail.mealStatus == "待送餐"){
          {{detail.productName}}&#40;
          @for(option of detail.detailList;track option){
          {{option.option}}
          @if(detail.detailList.length != option.id){
          <span>，</span>
          }
          }
          <span>&#41;</span> <br>
          }
          }
          }@else {
          @for(detail of product.orderDetails;track detail){
          @if(detail.mealStatus == "待送餐"){
          {{detail.productName}}&#40;
          @for(option of detail.detailList;track option){
          {{option.option}}
          @if(detail.detailList.length != option.id){
          <span>，</span>
          }
          }
          <span>&#41;</span> <br>
          }
          }
          }
        </div> <br>
        }
        }
        @if(!order.status.includes("製作中") && !order.orderCode.includes("A")){
        <button style="margin: 5%;" (click)="delivery(order.orderId,false)">已送餐</button>
        }
      </div> <br>

      }
      }
    </div>
    <span style="flex: 1 1 auto;"></span>
    <div
      style="height: auto; width:300px; border: 1px solid black; background-color: rgba(128,128,128,0.5); border-radius: 10px; padding: 10px; margin-bottom: 100px;">
      <h3>已送達</h3>
      @for(order of orders;track order){
      @if(order.status.includes("已送達")){
      <div style="background-color: white; border:1px solid black; border-radius: 5px;">
        <div style="display: flex; padding: 10px; align-items: start;">
          <div class="divCss1">
            <span>{{order.orderCode}}</span>
          </div>
          <span style="flex: 1 1 auto;"></span>
          @if(order.tableId){
          <div class="divCss1">
            <span>{{order.tableId}}</span>
          </div>
          }@else if(order.orderCode.includes("T")){
          <div class="divCss1">
            <span>外帶</span>
          </div>
          }@else {
          <div class="divCss1">
            <span>外送</span>
          </div>
          }
        </div>
        @for(product of order.orderProductList;track product){
        <div>
          <ul>
            @if(product.settingId > 0 && product.status.includes("已送達")){
            <li>{{product.settingId}}號餐</li>
            <ul>
              @for(detail of product.orderDetails;track detail){
              @if(detail.mealStatus == "已送達"){
              <li>{{detail.productName}}&#40;
                @for(option of detail.detailList;track option){
                {{option.option}}
                @if(detail.detailList.length != option.id){
                <span>，</span>
                }
                }
                &#41; <br>
              </li>
              }
              }
            </ul>
            }@else {
            @for(detail of product.orderDetails;track detail){
            @if(detail.mealStatus == "已送達"){
            <li>{{detail.productName}}</li> &#40;
            @for(option of detail.detailList;track option){
            {{option.option}}
            @if(detail.detailList.length != option.id){
            <span>，</span>
            }
            }
            &#41; <br>
            }
            }
            }
          </ul>
        </div> <br>
        }
      </div> <br>
      }

      }
    </div>
  </div>
</div>
